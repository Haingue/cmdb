server:
  port: 8090

com.management.cmdb:
  services:
    inventory:
      url: ${InventoryService_URL:http://localhost:8080}
  tools:
    tracing:
      url: ${TracingTool_URL:http://localhost:9411}

spring:
  application:
    name: cmdb-@project.artefactId@
    version: @project.version@
  threads:
    virtual:
      enabled: true
  jmx:
    enabled: false
  cloud:
    gateway:
      server:
        globalcors:
          cors-configurations:
            '[/**]':
              allowedOrigins: "localhost"
              allowedMethods:
                - GET
        webflux:
          routes:
            - id: inventory_service
              uri: ${com.management.cmdb.services.inventory.url}
              predicates:
              - Path=/api/inventory/**
              - Method=GET,POST,PUT,DELETE
              filters:
                - RewritePath=/api/inventory/?(?<segment>.*), /$\{segment}
                - LocalResponseCache=30m,500MB
#                - name: CircuitBreaker
#                  args:
#                    name: myCircuitBreaker
#                    fallbackUri: forward:/inCaseOfFailureUseThis
#                - name: CacheRequestBody
#                  args:
#                    bodyClass: java.lang.String
  sleuth:
    enabled: true
    propagation:
      type: W3C
  zipkin:
    base-url: ${com.management.cmdb.tools.tracing.url}
    service:
      name: ${spring.application.name}
    sampler:
      probability: 1.0
logging:
  level:
    root: WARN
    org.springframework.cloud.gateway: info
    org.springframework.http.server.reactive: info
    org.springframework.web.reactive: info
    reactor.ipc.netty: WARN
    reactor.netty: WARN

    com.management.cmdb.gateway: DEBUG

management.endpoints.web.exposure.include: '*'